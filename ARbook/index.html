<!doctype html>
<html>

<head>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js">
  </script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/3.3.0/aframe/build/aframe-ar.js">
  </script>
  <link rel="stylesheet" href="style.css">

</head>


<body style="margin : 0px; overflow: hidden;">


  <button class="button1" id="MyButton">Moving Poster</button>
  <div class="line" id="line_01"></div>


  <button class="button2" id="MyButton2">Moving Poster</button>
  <div class="line" id="line_02"></div>


  <button class="button3" id="MyButton3">Moving Poster</button>
  <div class="line" id="line_03"></div>




  <!-- 모르겠지만 건들지 말것 -->


  <script>
    let b = document.getElementById('MyButton')
    b.addEventListener('click', function () {
      document.querySelector("#vid1").play();
    })
    b.style.visibility = 'hidden';

    let b2 = document.getElementById('MyButton2')
    b2.addEventListener('click', function () {
      document.querySelector("#vid2").play();
    })
    b2.style.visibility = 'hidden';

    let b3 = document.getElementById('MyButton3')
    b3.addEventListener('click', function () {
      document.querySelector("#vid3").play();
    })
    b3.style.visibility = 'hidden';



    AFRAME.registerComponent("vidhandler1", {
      init: function () {
        this.toggle = false;
        document.querySelector("#vid1").pause();
        console.log("test");//reference to the video
      },
      tick: function () {
        if (document.querySelector("#a-marker1").object3D.visible == true) { // get the state of our marker : is it visible ?
          document.querySelector("#MyButton").style.visibility = 'visible';
          if (!this.toggle) {
            this.toggle = true;
            document.querySelector("#vid1").play();
            console.log("visible");
          }
        } else {
          this.toggle = false;
          document.querySelector("#MyButton").style.visibility = 'hidden';
          document.querySelector("#vid1").pause();
          console.log("not visible");
        }
      }
    });



    AFRAME.registerComponent("vidhandler2", {
      init: function () {
        this.toggle = false;
        document.querySelector("#vid2").pause();
        console.log("test");//reference to the video
      },
      tick: function () {
        if (document.querySelector("#a-marker2").object3D.visible == true) { // get the state of our marker : is it visible ?
          document.querySelector("#MyButton2").style.visibility = 'visible';
          if (!this.toggle) {
            this.toggle = true;
            document.querySelector("#vid2").play();
            console.log("visible");
          }
        } else {
          this.toggle = false;
          document.querySelector("#MyButton2").style.visibility = 'hidden';
          document.querySelector("#vid2").pause();
          console.log("not visible");
        }
      }
    });



    AFRAME.registerComponent("vidhandler3", {
      init: function () {
        this.toggle = false;
        document.querySelector("#vid3").pause();
        console.log("test");//reference to the video
      },
      tick: function () {
        if (document.querySelector("#a-marker3").object3D.visible == true) { // get the state of our marker : is it visible ?
          document.querySelector("#MyButton3").style.visibility = 'visible';
          if (!this.toggle) {
            this.toggle = true;
            document.querySelector("#vid3").play();
            console.log("visible");
          }
        } else {
          this.toggle = false;
          document.querySelector("#MyButton3").style.visibility = 'hidden';
          document.querySelector("#vid3").pause();
          console.log("not visible");
        }
      }
    });


  </script>





  <!-- a어쩌고 시작 -->


  <a-scene embedded
    arjs="sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3; trackingMethod: best ; changeMatrixMode: modelViewMatrix;"
    vr-mode-ui="enabled: false"
    renderer="sortObjects: true; antialias: true; colorManagement: true; physicallyCorrectLights; logarithmicDepthBuffer: true;"
    smooth=" true" smoothCount="5" smoothTolerance=".05" smoothThreshold="5" sourceWidth="800" sourceHeight="600"
    displayWidth="1280" displayHeight="720">

    <!-- ////////////////////////// -->



    <!-- 에셋 -->
    <a-assets>


      <img id="cooper" src="./assets/grid/photo.png">

      <!-- 그리드 소스 -->
      <img id="grid_01" src="./assets/grid/grid_01.png">
      <img id="grid_02" src="./assets/grid/grid_02.png">
      <img id="grid_03" src="./assets/grid/grid_03.png">
      <img id="grid_04" src="./assets/grid/grid_04.png">


      <video id="vid1" class="vid" src="./assets/grid/grid.mp4" autoplay="true" loop="true" preload="auto"
        controls="false" playsinline="" webkit-playsinline=""></video>




      <!-- 타이포 소스 -->
      <img id="typo_01" src="./assets/typo/typo_01.png">
      <img id="typo_02" src="./assets/typo/typo_02.png">
      <img id="typo_03" src="./assets/typo/typo_03.png">
      <img id="typo_04" src="./assets/typo/typo_04.png">
      <img id="typo_05" src="./assets/typo/typo_05.png">




      <video id="vid2" class="vid" src="./assets/typo/typo_video.mp4" autoplay="true" loop="true" preload="auto"
        controls="false" playsinline="" webkit-playsinline=""></video>


      <!-- 컬러 소스 -->
      <img id="color_01" src="./assets/color/color_01.png">
      <img id="color_02" src="./assets/color/color_02.png">
      <img id="color_03" src="./assets/color/color_03.png">
      <img id="color_04" src="./assets/color/color_04.png">
      <img id="color_05" src="./assets/color/color_05.png">



      <video id="vid3" class="vid" src="./assets/color/color.mp4" autoplay="true" loop="true" preload="auto"
        controls="false" playsinline="" webkit-playsinline=""></video>

    </a-assets>


    <!-- 큐알 안에 띄울 것들 -->


    <a-marker type="barcode" value="0">
      <a-image src="#cooper" rotation="90 0 0" width="2.5" height="2.5" position="0 0 0"></a-image>
    </a-marker>

    <!-- 그리드 파트 -->
    <a-marker type="barcode" value="1">
      <a-image src="#grid_01" rotation="90 0 0" width="1.5" height="1.5" position="0 0.1 0"></a-image>
    </a-marker>

    <a-marker type="barcode" value="2">
      <a-image src="#grid_02" rotation="90 0 0" width="1.5" height="1.5" position="0 0.2 0"></a-image>
    </a-marker>

    <a-marker type="barcode" value="3">
      <a-image src="#grid_03" rotation="90 0 0" width="1.5" height="1.5" position="0 0.3 0"></a-image>
    </a-marker>

    <a-marker type="barcode" value="4">
      <a-image src="#grid_04" rotation="90 0 0" width="1.5" height="1.5" position="0 0.4 0"></a-image>
    </a-marker>


    <a-marker vidhandler1 id="a-marker1" type="barcode" value="5">
      <a-video src="#vid1" rotation="90 90 0" width="0.8" height="1.128" position="0 0 0"> </a-video>
    </a-marker>




    <!-- typo 파트 -->
    <a-marker type="barcode" value="6">
      <a-image src="#typo_01" rotation="-90 0 0" width="1.5" height="2.5" position="0 0.1 0"></a-image>
    </a-marker>

    <a-marker type="barcode" value="7">
      <a-image src="#typo_02" rotation="-90 0 0" width="1.5" height="2.5" position="0 0.2 0"></a-image>
    </a-marker>

    <a-marker type="barcode" value="8">
      <a-image src="#typo_03" rotation="-90 0 0" width="1.5" height="2.5" position="0 0.3 0"></a-image>
    </a-marker>

    <a-marker type="barcode" value="9">
      <a-image src="#typo_04" rotation="-90 0 0" width="1.5" height="2.5" position="0 0.4 0"></a-image>
    </a-marker>

    <a-marker type="barcode" value="10">
      <a-image src="#typo_05" rotation="-90 0 0" width="1.5" height="2.5" position="0 0 0"></a-image>
    </a-marker>



    <a-marker vidhandler2 id="a-marker2" type="barcode" value="11">
      <a-video src="#vid2" rotation="-90 0 0" width="0.8" height="1.128" position="0 0.3 0"> </a-video>
    </a-marker>




    <!-- color 파트 -->
    <a-marker type="barcode" value="12">
      <a-image src="#color_01" rotation="90 0 0" width="1.5" height="2.5" position="0 0.1 0"></a-image>
    </a-marker>

    <a-marker type="barcode" value="13">
      <a-image src="#color_02" rotation="-90 0 0" width="1.5" height="2.5" position="0 0.2 0"></a-image>
    </a-marker>

    <a-marker type="barcode" value="14">
      <a-image src="#color_03" rotation="-90 0 0" width="1.5" height="2.5" position="0 0.3 0"></a-image>
    </a-marker>

    <a-marker type="barcode" value="15">
      <a-image src="#color_04" rotation="-90 0 0" width="1.5" height="2.5" position="0 0 0"></a-image>
    </a-marker>

    <a-marker type="barcode" value="16">
      <a-image src="#color_05" rotation="-90 0 0" width="1.5" height="2.5" position="0 0 0"></a-image>
    </a-marker>


    <a-marker vidhandler3 id="a-marker3" type="barcode" value="17">
      <a-video src="#vid3" rotation="-90 0 0" width="0.8" height="1.128" position="0 0.3 0"> </a-video>
    </a-marker>

    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

  </a-scene>
  <!-- a어쩌고 끝 -->







</body>

</html>